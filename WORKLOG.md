# 작업 일지 (Work Log)

## 2025년 9월 11일

### ✅ 목표: 메인 페이지 상품 이미지 표시 기능 완성

#### 1. 문제 상황
- Supabase DB에서 상품 정보를 가져와 목록을 표시했지만, 상품 이미지가 화면에 보이지 않는 문제가 발생함.

#### 2. 원인 분석 (터미널 로그 확인)
- `npm run dev` 실행 시 터미널 로그를 분석하여 세 가지 원인을 발견함.
    1.  **잘못된 이미지 도메인:** 이미지의 실제 주소는 `pstatic.net`(네이버)이었으나, Next.js 설정(`next.config.ts`)에는 `supabase.co` 도메인만 허용되어 있었음.
    2.  **잘못된 데이터 참조:** 코드는 `image_url` 변수를 찾고 있었지만, 실제 DB 데이터는 `image_urls` 라는 배열로 구성되어 있었음.
    3.  **쿠키 처리 오류:** 최신 Next.js 버전과 Supabase 라이브러리 간의 호환성 문제로 `cookies` 관련 오류가 발생하고 있었음.

#### 3. 해결 과정
- 위 세 가지 문제를 해결하기 위해 다음 파일들을 수정함.
    1.  **`next.config.ts`:** 네이버 이미지 도메인(`shop-phinf.pstatic.net`)을 이미지 허용 목록에 추가함.
    2.  **`src/components/products/ProductCard.tsx`:** `image_urls` 배열의 첫 번째 항목을 이미지 주소로 사용하도록 수정하고, Next.js의 `<Image>` 컴포넌트를 적용하여 최적화함.
    3.  **`src/utils/supabase/server.ts`:** 최신 Next.js 문법에 맞게 쿠키 처리 로직을 `async/await`를 사용하도록 수정함.

#### 4. 최종 결과
- 모든 오류가 해결되어, 메인 페이지에 상품 이미지가 Next.js에 의해 최적화되어 정상적으로 표시됨.

---

### ✅ 목표: 메인 페이지 디자인 시스템 개편

#### 1. 요구사항
- 칙칙한 검정 배경에서 벗어나, 남녀 모두에게 어필할 수 있는 세련된 디자인.
- "여자친구가 남자친구 옷 골라주는 느낌"의 컨셉.
- 복잡하지 않고 정돈된 느낌의 UI.

#### 2. 해결 과정
- **전역 스타일 (`globals.css`):** 전체 컬러 시스템을 변경. (배경: 오프-화이트, 텍스트: 짙은 회색)
- **메인 레이아웃 (`layout.tsx`):** 콘텐츠의 최대 너비를 설정하고 여백을 조정하여 가독성 및 안정감 향상.
- **상품 카드 (`ProductCard.tsx`):** 딱딱한 테두리 대신 부드러운 그림자(shadow) 효과와 인터랙티브한 호버 효과를 적용하여 모던한 느낌으로 변경.
- **메인 페이지 (`page.tsx`):** 상단 소개 영역에 배경과 여백을 추가하여 시각적으로 강조하고, 불필요한 디버깅 코드를 제거.

#### 3. 최종 결과
- 제안된 디자인 시스템이 성공적으로 적용되어, 사이트 전반의 분위기가 밝고 세련되게 변경됨.
- feature/design-refresh 에 임시 저장 다음에 여기 브랜치로 돌아와서 계속 진행해야함 -> 진행하는 법 물어보기 

---

## 2025년 9월 12일

### ✅ 목표: 사이트 주요 레이아웃 및 기능 개편

#### 1. 헤더(Header) 전체 개편
- **디자인 변경:** 기존의 좌측 정렬 로고 및 상단 메뉴 방식에서, **중앙 로고, 좌측 햄버거 메뉴, 우측 아이콘** 구조로 변경하여 모던하고 미니멀한 디자인을 적용함.
- **사이드 메뉴 구현:** 헤더의 햄버거 메뉴 버튼과 연동되는 사이드 메뉴(Drawer)를 구현함. 메뉴 클릭 시 좌측에서 부드럽게 나타나고, 바깥 영역 클릭 시 닫히는 기능을 포함.
- **고정 헤더 및 스타일 개선:** 스크롤과 무관하게 항상 상단에 고정되는 흰색 배경의 헤더로 변경하고, 하단에 얇은 밑줄을 추가하여 명확한 영역을 구분함.
- **UI/UX 개선:**
    - 헤더의 메뉴 버튼, 검색 버튼, 사이드 메뉴의 닫기 버튼에 `cursor-pointer`를 적용하여 사용성을 개선함.
    - 헤더 우측 아이콘에 마우스를 올리면 '검색', '마이페이지', '장바구니' 툴팁이 나타나는 기능을 추가함.
    - 아이콘들의 수직 정렬이 미세하게 맞지 않던 문제를 수정함.

#### 2. 메인 페이지 및 라우팅 구조 변경
- **"Shop Now" 기능 변경:** 기존의 페이지 내 스크롤 방식에서, 별도의 **`/shop` 페이지로 이동**하는 방식으로 변경함.
- **아이콘 변경:** 페이지 이동 방식에 맞춰, 버튼의 아이콘을 아래 화살표(↓)에서 오른쪽 화살표(→)로 교체함.
- **메인 페이지 정리:** `/shop` 페이지가 분리됨에 따라, 메인 페이지(`page.tsx`)에서는 상품 목록을 제거하고 Hero 섹션만 남도록 코드를 정리함.
- **임시 Hero 섹션 적용:** 최종 영상 콘텐츠가 적용되기 전까지, 임시로 흰색 배경과 검은색 텍스트로 구성된 깔끔한 Hero 섹션을 적용함.

---

## 2025년 9월 15일

### ✅ 목표: '/shop' 페이지 "릴스로 보는 스타일" 섹션 초기 기능 구현

#### 1. 릴스 섹션 기본 골격 구현
- **`ReelsSection.tsx` 컴포넌트 생성:** `/shop` 페이지에 릴스 콘텐츠를 표시할 기본 컴포넌트를 생성함.
- **임시 데이터 및 레이아웃 적용:** 임시 썸네일과 제목을 표시하는 그리드 레이아웃을 구현하고, `next/image`를 사용하여 이미지를 최적화함.
- **`next.config.ts` 수정:** 임시 이미지의 도메인(`picsum.photos`)을 이미지 허용 목록에 추가하여 정상적으로 표시되도록 함.

#### 2. 릴스 영상 플레이어 모달 구현
- **UI 라이브러리 설치:** 모달 및 플레이어 구현을 위해 `@headlessui/react`와 `react-player` 라이브러리를 설치함.
- **재사용 가능한 `Modal` 컴포넌트 구현:** 다양한 크기의 모달을 지원하는 `common/Modal.tsx` 컴포넌트를 생성함.
- **영상 플레이어 통합:** 썸네일 클릭 시, `react-player`가 포함된 모달 창이 열리도록 `ReelsSection.tsx`에 상태 및 이벤트 핸들러 로직을 추가함.

#### 3. 렌더링 오류 해결
- **문제 상황:** `react-player`가 서버 사이드 렌더링(SSR) 시 `window` 객체를 참조하려 해, Hydration 오류 및 모듈 경로 해석 오류가 발생함.
- **해결 과정:** Next.js의 `next/dynamic`을 사용하여 `ReactPlayer` 컴포넌트를 서버에서는 렌더링하지 않고, 클라이언트 사이드에서만 동적으로 불러오도록 수정하여 문제를 해결함. (`ssr: false`)

#### 4. 최종 결과
- `/shop` 페이지에 릴스 썸네일 목록이 표시됨.
- 각 썸네일을 클릭하면, 해당 영상이 재생되는 모달 창이 정상적으로 열림.

---

### 🚀 다음 작업 계획: 영상 재생 시간에 따른 상품 표시 기능 구현

- **세부 계획:**
    1. **데이터 구조 확장:** 릴스 데이터에 시간대별로 표시될 상품 정보(이름, 가격, 이미지 등)를 추가.
    2. **재생 시간 추적:** `react-player`의 `onProgress` 콜백을 사용하여 현재 영상 재생 시간을 상태로 관리.
    3. **조건부 렌더링:** 재생 시간에 따라 해당 상품 정보를 모달 창의 상품 정보 영역에 동적으로 표시하는 로직 구현.

---

## 2025년 9월 17일

### ✅ 목표: Shop 페이지 구조 개편 및 장바구니 기능 기초 구현

#### 1. Shop 페이지 섹션 분리 및 콘텐츠 추가
- **페이지 구조 개편:** `/shop` 페이지를 'New Arrivals', 'Best Seller', 'Review' 섹션으로 분리.
- **예시 상품 추가:** 'New Arrivals' 및 'Best Seller' 섹션에 `ProductCard` 컴포넌트를 활용하여 예시 상품 목록을 추가.
- **`ReelsSection` 제거:** `/shop` 페이지에서 `ReelsSection` 컴포넌트 import 및 사용을 제거하고, `src/components/shop/ReelsSection.tsx` 파일 삭제.

#### 2. 헤더 아이콘 정렬 개선
- **수직 정렬 문제 해결:** 헤더의 왼쪽 메뉴 아이콘(`Menu`)과 오른쪽 아이콘들의 수직 정렬이 맞지 않던 문제를 해결하기 위해, `Menu` 아이콘의 크기를 `24`에서 `22`로 통일하고, 왼쪽 메뉴 버튼 컨테이너에 `flex items-center`를 추가, 버튼 자체의 기본 패딩을 제거(`p-0`)하여 정렬을 개선.

#### 3. 장바구니 기능 기초 구현
- **장바구니 페이지 생성:** `/cart` 경로에 `src/app/cart/page.tsx` 파일을 생성하여 장바구니 화면의 기본 구조를 마련.
- **기존 헤더 내비게이션 확인:** 헤더(`src/components/layout/Header.tsx`)에 이미 `/cart`로 이동하는 `ShoppingCart` 아이콘 링크가 구현되어 있음을 확인.
- **장바구니 UI 개선 (bofmarket.com 참고):**
    - 상단에 주문 진행 단계 표시기 (`01 장바구니 > 02 주문서작성 > 03 주문완료`) 추가.
    - 장바구니가 비어있을 때의 메시지 및 안내 문구 추가.
    - "국내배송상품" 섹션 헤더 및 장바구니 항목 목록 구현 (임시 데이터 사용).
    - 장바구니 항목별 수량 조절 버튼, 삭제 버튼 추가.
    - "선택상품삭제", "장바구니비우기" 등 장바구니 관리 액션 버튼 추가.
    - "결제 예정 금액" 요약 섹션에 총 상품 금액, 배송비, 총 주문 금액 표시.
    - "전체상품주문", "선택상품주문" 버튼 추가.
    - "이용안내" 섹션 추가.
- **새 브랜치 생성:** 장바구니 기능 개발을 위해 `feature/shopping-cart` 브랜치로 전환하여 작업 진행.